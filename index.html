<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ç€¬éƒ¨ãƒ­ã‚°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    header {
      background: #222;
      color: #fff;
      padding: 16px;
      text-align: center;
    }
    main {
      max-width: 900px;
      margin: 24px auto;
      padding: 0 16px;
    }
    .form-section, .list-section {
      background: #fff;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 24px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
    }
    input, select, textarea, button {
      width: 100%;
      margin-top: 6px;
      padding: 8px;
      font-size: 14px;
    }
    button {
      margin-top: 16px;
      background: #ff9800;
      border: none;
      color: #fff;
      font-size: 16px;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background: #e68900;
    }
    .shop {
      border-bottom: 1px solid #ddd;
      padding: 12px 0;
    }
    .shop:last-child {
      border-bottom: none;
    }
    .genre {
      font-size: 12px;
      color: #666;
    }
    .stars {
      color: #ff9800;
      font-size: 16px;
    }
        a.map-link {
      font-size: 13px;
      color: #2196f3;
      text-decoration: none;
    }
    .star {
      font-size: 24px;
      cursor: pointer;
      color: #ccc;
    }
    .star.selected {
      color: #ff9800;
    }
  </style>
</head>
<body>
  <header>
    <h1>ç€¬éƒ¨ãƒ­ã‚°</h1>
    <p>ç¾å‘³ã—ã„åº—ã®è¨˜éŒ²</p>
  </header>

  <main>
    <section class="form-section">
      <h2>é£²é£Ÿåº—ã‚’è¿½åŠ </h2>

      <label>åº—å</label>
      <input type="text" id="name" />

      <label>ã‚¸ãƒ£ãƒ³ãƒ«</label>
      <select id="genre">
        <option>å’Œé£Ÿ</option>
        <option>æ´‹é£Ÿ</option>
        <option>ä¸­è¯</option>
        <option>ãƒ©ãƒ¼ãƒ¡ãƒ³</option>
        <option>ã‚«ãƒ•ã‚§</option>
        <option>å±…é…’å±‹</option>
        <option>ãã®ä»–</option>
      </select>

            <label>è©•ä¾¡ï¼ˆã‚¯ãƒªãƒƒã‚¯ï¼‰</label>
      <div id="star-input">
        <span class="star" data-value="1">â˜…</span>
        <span class="star" data-value="2">â˜…</span>
        <span class="star" data-value="3">â˜…</span>
        <span class="star" data-value="4">â˜…</span>
        <span class="star" data-value="5">â˜…</span>
      </div>
      <input type="hidden" id="rating" value="0" />

      <label>Googleãƒãƒƒãƒ—URL</label>
      <input type="url" id="map" placeholder="https://maps.google.com/..." />

      <label>æ„Ÿæƒ³</label>
      <textarea id="comment" rows="4"></textarea>

      <button onclick="addShop()">è¿½åŠ ã™ã‚‹</button>
    </section>

    <section class="list-section">
      <h2>è¨˜éŒ²ä¸€è¦§</h2>

      <label>ã‚¸ãƒ£ãƒ³ãƒ«ã§çµã‚Šè¾¼ã¿</label>
      <select id="filter" onchange="filterGenre()">
        <option value="all">ã™ã¹ã¦</option>
        <option>å’Œé£Ÿ</option>
        <option>æ´‹é£Ÿ</option>
        <option>ä¸­è¯</option>
        <option>ãƒ©ãƒ¼ãƒ¡ãƒ³</option>
        <option>ã‚«ãƒ•ã‚§</option>
        <option>å±…é…’å±‹</option>
        <option>ãã®ä»–</option>
      </select>

      <div id="list"></div>
    </section>
  </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
      let shops = JSON.parse(localStorage.getItem('sebelog_shops')) || [];

      // æ˜Ÿã‚¯ãƒªãƒƒã‚¯å‡¦ç†
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('star')) {
          const value = e.target.dataset.value;
          document.getElementById('rating').value = value;
          document.querySelectorAll('.star').forEach(star => {
            star.classList.toggle('selected', star.dataset.value <= value);
          });
        }
      });

      window.addShop = function () {
        const ratingValue = document.getElementById('rating').value;
        if (ratingValue === '0') {
          alert('æ˜Ÿè©•ä¾¡ã‚’é¸æŠã—ã¦ãã ã•ã„');
          return;
        }

        const shop = {
          name: document.getElementById('name').value,
          genre: document.getElementById('genre').value,
          rating: ratingValue,
          comment: document.getElementById('comment').value,
          map: document.getElementById('map').value
        };

        if (!shop.name) {
          alert('åº—åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
          return;
        }

        shops.push(shop);
        save();

        document.getElementById('name').value = '';
        document.getElementById('comment').value = '';
        document.getElementById('map').value = '';
        document.getElementById('rating').value = '0';
        document.querySelectorAll('.star').forEach(star => star.classList.remove('selected'));
      };

      window.render = function () {
        const list = document.getElementById('list');
        list.innerHTML = '';

        const selected = document.getElementById('filter').value;

        shops
          .filter(s => selected === 'all' || s.genre === selected)
          .forEach((s, index) => {
            const div = document.createElement('div');
            div.className = 'shop';
            div.innerHTML = `
              <strong>${s.name}</strong>
              <div class="genre">ã‚¸ãƒ£ãƒ³ãƒ«ï¼š${s.genre}</div>
              <div class="stars">${'â˜…'.repeat(s.rating)}</div>
              <p>${s.comment}</p>
              ${s.map ? `<a class="map-link" href="${s.map}" target="_blank">ğŸ“ Googleãƒãƒƒãƒ—ã‚’è¦‹ã‚‹</a>` : ''}
              <br />
              <button onclick="deleteShop(${index})">å‰Šé™¤</button>
            `;
            list.appendChild(div);
          });
      };

      window.filterGenre = function () {
        render();
      };

      window.deleteShop = function (index) {
        if (!confirm('ã“ã®è¨˜éŒ²ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;
        shops.splice(index, 1);
        save();
      };

      function save() {
        localStorage.setItem('sebelog_shops', JSON.stringify(shops));
        render();
      }

      render();
    });
  </script>
</body>
</html>
